@app.route('/subscribe', methods=['GET', 'POST'])
def subscribe():
    if request.method == 'POST':
        tier = request.form.get('tier')
        session['subscription'] = tier

        # If it's Tier 1, skip payment
        if tier == 'Tier 1':
            session['verified'] = True
            flash('✅ Tier 1 Activated! Start your free course.', 'success')
            return redirect('/tier1')

        # Else, redirect to payment page
        payment_method = request.form.get('payment')
        if not payment_method:
            flash('❌ Please select a payment method.', 'error')
            return redirect('/subscribe')

        session['payment_method'] = payment_method
        return redirect('/payment_crypto')  # or wherever payment flows next

    return render_template('subscribe.html')
